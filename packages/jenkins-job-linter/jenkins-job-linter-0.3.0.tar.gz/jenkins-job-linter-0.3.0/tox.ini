[tox]
envlist=mypy,py35,py36,lint

[testenv]
deps=
    -rtest-requirements.txt
commands=
    pytest --cov=jenkins_job_linter

[testenv:lint]
deps=
    flake8
    isort
    -rtest-requirements.txt
commands=
    flake8 jenkins_job_linter tests
    isort --diff --recursive --check jenkins_job_linter tests

[testenv:mypy]
deps=
    mypy
commands=
    mypy --ignore-missing-imports --strict jenkins_job_linter

[testenv:codecov]
# Upload coverage report to codecov.io; only intended for Travis use
passenv = CI TRAVIS TRAVIS_*
deps=
    -rtest-requirements.txt
    codecov
commands=
    pytest --cov=jenkins_job_linter
    codecov
