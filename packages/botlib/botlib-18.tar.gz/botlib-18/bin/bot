#!/usr/bin/env python3

""" botlib's main bot program """

import os; import sys; sys.path.insert(0, os.getcwd())

from botlib.utils import parse_cli, reset, startup, enable_history
from botlib.space import kernel, exceptions
from botlib import __version__

startup()

def main():
    """ init config, create bot, start kernel, wait for completion and shutdown the bot """
    cfg = parse_cli()
    cfg.name = "BOTLIB"
    cfg.version = __version__
    enable_history()
    kernel.boot(cfg)
    kernel.wait()
    kernel.shutdown()

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("")
    reset()
    os._exit(0)
