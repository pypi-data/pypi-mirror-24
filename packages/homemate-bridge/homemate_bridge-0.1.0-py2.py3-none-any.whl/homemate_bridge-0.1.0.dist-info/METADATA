Metadata-Version: 2.0
Name: homemate-bridge
Version: 0.1.0
Summary: Orvibo "Homemate" to MQTT bridge
Home-page: https://github.com/insertjokehere/homemate-bridge
Author: Will Hughes
Author-email: will@willhughes.name
License: Apache
Platform: UNKNOWN
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: Unix
Classifier: Operating System :: POSIX
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 2.7
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.3
Classifier: Programming Language :: Python :: 3.4
Classifier: Programming Language :: Python :: 3.5
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
Classifier: Topic :: Utilities
Requires-Dist: paho-mqtt
Requires-Dist: cryptography
Requires-Dist: hexdump
Requires-Dist: hassdevice (==0.1.0)

========
Overview
========



Orvibo "Homemate" to MQTT bridge

* Free software: Apache Software License 2.0

Supported Devices
=================

* Orvibo S20c

If you've managed to the bridge working with other devices, please open an issue so I can update the list!

Requirements
============

* Python 3.x, on Linux
* The python3-dev, build-essential and libssl-dev packages (for Debian-based systems, or the equivelant)
* One or more supported switches
* HomeAssistant
* An MQTT broker connected to HomeAssistant

Installation
============

* Obtain the Orvibo 'PK' key (see below) as a `keys.json` file
* Redirect all traffic for homemate.orvibo.com, TCP port 10001 to the machine running the bridge. The easiest way to do this is to override the DNS record, but how you can do this will greatly depend on how your network is set up
* `Configure HomeAssistant <https://home-assistant.io/docs/mqtt/discovery/>_` to discover MQTT devices
* Install the bridge:
::

   pip install homemate-bridge

* Run the bridge:
::

   homemate-bridge --keys-file <path/to/key/file> --mqtt-host ...

* After ~30 seconds you should see devices connecting to the bridge, and new switch entities in HomeAssistant

Getting the Orvibo 'PK' encryption key
======================================

As part of the initial handshake with the server, the switch sends a 'hello' packet encrypted with a static key, and expects a packet encrypted with the same key in response that sets a different key for all subsequent packets. This is the 'PK' key, and is not included with the source code until I work out if there would be legal issues with doing so. Fortunately, Orvibo hardcode this key in the source code of the 'Kepler' Android app.

* Download the `Kepler apk <http://www.orvibo.com/software/android/kepler.apk>_`
* Run the `homemate-bridge-seed-keyfile --keys-file keys.json <path/to/apk>` script to extract the key and save it. Note that the file will be overwritten if it exists.

Documentation
=============

https://homemate-bridge.readthedocs.io/

Development
===========

To run the all tests run::

    tox


Changelog
=========

0.0.1 (2017-07-11)
------------------

* First release on PyPI.


